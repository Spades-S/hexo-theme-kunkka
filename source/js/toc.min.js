$(document).ready(function(){
    var toc = $("#toc"), post = $(".post-body");
    if($(window).width()>768){
        var post_height = post.position().top + post.outerHeight();
            toc_height = toc.height(),
            pos_max = post_height - toc_height;
        $(".toc-item").each(function(){
            $(this).attr("id","toc-"+$(this).children(".toc-link").attr("href").substr(1));
        });
        $(window).scroll(function(){
            var scroll_top = $(this).scrollTop();
            toc.css("top",scroll_top<55? 90-scroll_top: (pos_max>scroll_top? 35: pos_max - scroll_top));
        });
    }
});
